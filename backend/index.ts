/**
 * Точка входа сервера.
 * 1. Загружаем конфигурацию dotenv-flow, чтобы переменные process.env читались из файлов .env.
 * 2. Приводим номер порта к числу, чтобы избежать несовместимости форматов между Unix и Windows.
 * 3. Далее инициализируем Express-приложение и запускаем HTTP-сервер на указанном порту.
 */
import './config/env';
import app from './app';

/**
 * Порт читается из переменной окружения или берётся по умолчанию; приводим к числу.
 * Number(...) вернёт NaN, если значение не числовое, поэтому используем ?? для подстановки 5000.
 */
const PORT = Number(process.env.PORT ?? 5000);

/**
 * Запускаем Express-приложение и слушаем входящие запросы.
 * В консоли выводится человекочитаемое сообщение, если сервер успешно стартовал.
 */
app.listen(PORT, () => {
  console.log(`Server running on http://localhost:${PORT}`);
});
